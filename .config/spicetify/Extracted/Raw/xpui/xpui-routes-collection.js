"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[6309],{4263:(e,t,a)=>{a.d(t,{u:()=>A});var s=a(59496),n=a(84875),r=a.n(n),i=a(53083),l=a(6923),o=a(49990),c=a(93711);const u="FvfvGU3jvHRskUU9v9_8",d="Q9AlbZn2EGzy3MTWXa8X",m="mxmxS0y8LiwSs5nueKPT",p="GXxVAveNFStY3pBI_NO4",h="eHcXC2s97InYP7rMNT0H";var g=a(4637);const A=(0,s.memo)((function(e){const{children:t,message:a,title:s,linkTitle:n,linkTo:A,onClick:x,renderInline:f=!1}=e,{isXSOnly:E,isSMOnly:C}=(0,o.e)(),y=E||C;return(0,g.jsxs)("section",{className:r()(u,{[d]:f}),children:[t,(0,g.jsx)(i.D,{as:"h1",variant:y?"cello":"alto",className:p,children:s}),(0,g.jsx)(i.D,{variant:y?"mesto":"ballad",className:h,children:a}),n&&(A||x)&&(0,g.jsx)(l.D,{colorSet:"invertedLight",className:m,href:A,onClick:x,component:c.Z,children:n})]})}))},23871:(e,t,a)=>{a.d(t,{n:()=>v});var s=a(59496),n=a(84875),r=a.n(n),i=a(92053),l=a(53083),o=a(97579),c=a(40591),u=a(80326),d=a(17657),m=a(8566),p=a(1929);var h=a(55540),g=a(67618),A=a(92303);const x="main-topBar-contentArea",f="muYk5XIwKmqR9iNibk_f",E="queue-tabBar-headerItem",C="queue-tabBar-moreButton",y="queue-tabBar-moreButtonActive",b="yxf_6IsQEmHjijEBUMTP",j="queue-tabBar-active",L="queue-tabBar-headerItemLink",T="queue-tabBar-header",S="queue-tabBar-chevron";var D=a(4637);const I=({items:e,activeItemId:t})=>(0,D.jsx)(g.v,{children:e.map((e=>e.disabled?(0,D.jsx)(A.s,{disabled:!0,role:"menuitemradio",className:b,onClick:e.handleClick,children:e.title},e.uri):(0,D.jsx)(A.s,{role:"menuitemradio",to:e.to,end:!0,"aria-checked":e.itemId===t,className:({isActive:e})=>r()(b,{[j]:e}),onClick:e.handleClick,children:e.title},e.uri)))});var _=a(46060);const v=(0,s.memo)((function({isCentered:e,links:t,landmarkLabel:a,className:n}){const g=(0,s.useRef)(null),[A,b]=(0,s.useState)([]),[v,R]=(0,s.useState)(0),[k,O]=(0,s.useState)([]),P=function(){const[e,t]=(0,s.useState)(window.innerWidth),{scrollNodeChildRef:a}=(0,s.useContext)(m.VX),n=(0,d.y1)((e=>{e?.width&&t(e.width)}),250);return(0,p.y)({refOrElement:a,observeOnly:"width",onResize:n}),e}()??1/0,{pathname:N}=(0,i.TH)(),B=t.find((e=>e.to===N));return(0,s.useEffect)((()=>{g.current&&R(g.current.clientWidth)}),[P]),(0,s.useEffect)((()=>{if(!g.current)return;const e=Array.from(g.current.children).map((e=>e.clientWidth));b(e)}),[t]),(0,s.useEffect)((()=>{if(!g.current)return;if(A.slice(0,-1).reduce(((e,t)=>e+t),0)<=v)return void O([]);const e=A.reduce(((e,t)=>e>t?e:t),0),t=[];let a=e;A.forEach(((e,s)=>{v>=a+e?a+=e:t.push(s)})),O(t)}),[v,A]),(0,D.jsx)("nav",{className:r()(n,x),"aria-label":a,children:(0,D.jsxs)("ul",{className:e?f:T,ref:g,children:[t.filter(((e,t)=>!k.includes(t))).map((e=>{const t=e?.render??(e=>e);return(0,D.jsx)(s.Fragment,{children:t((0,D.jsx)("li",{className:E,children:e.disabled?(0,D.jsx)("div",{className:L,children:(0,D.jsx)(l.D,{variant:"mestoBold",children:e.title})}):(0,D.jsx)(_.O,{end:!0,className:({isActive:e})=>r()(L,{[j]:e}),to:e.to,onClick:e.handleClick,children:(0,D.jsx)(l.D,{variant:"mestoBold",children:e.title})})}))},e.to)})),k.length||0===A.length?(0,D.jsx)("li",{className:E,children:(0,D.jsx)(h.xV,{renderInline:!0,menu:(0,D.jsx)(I,{items:t.filter(((e,t)=>k.includes(t))),activeItemId:B?.itemId}),children:(e,t,a)=>(0,D.jsxs)("button",{className:r()(C,{[y]:B}),type:"button",onClick:t,ref:a,children:[(0,D.jsx)(l.D,{variant:"mestoBold",children:B?B.title:u.ag.get("more")}),e?(0,D.jsx)(o.U,{iconSize:16,className:S,"aria-hidden":"true"}):(0,D.jsx)(c.i,{iconSize:16,className:S,"aria-hidden":"true"})]})})}):null]})})}))},60691:(e,t,a)=>{a.d(t,{$:()=>o,Q:()=>l});var s=a(59496),n=a(83316),r=a(61919),i=a(4637);const l=(0,s.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a LibrarySortProvider")},sortState:r.oT.ADDED_AT}),o=s.memo((function({uri:e,children:t,defaultSortOption:a}){return(0,i.jsx)(n.r,{uri:e,defaultState:a,sortContext:l,children:t})}))},61919:(e,t,a)=>{a.d(t,{Aq:()=>d,Bf:()=>D,EY:()=>x,G5:()=>C,JV:()=>I,MY:()=>o,Ru:()=>c,ZP:()=>f,a6:()=>g,aY:()=>L,e3:()=>h,ei:()=>l,o$:()=>m,oT:()=>i,pT:()=>j,rJ:()=>S,u3:()=>T,w0:()=>y});var s=a(80326),n=a(48602),r=a(56799);let i;!function(e){e.SHOW_ALPHABETICAL="SHOW_ALPHABETICAL",e.BOOK_ALPHABETICAL="BOOK_ALPHABETICAL",e.EPISODE_ALPHABETICAL="EPISODE_ALPHABETICAL",e.PLAYLIST_ALPHABETICAL="PLAYLIST_ALPHABETICAL",e.ALBUM_ALPHABETICAL="ALBUM_ALPHABETICAL",e.ADDED_AT="ADDED_AT",e.CREATOR_NAME="CREATOR_NAME",e.CREATOR_NAME_ALPHABETICAL="CREATOR_NAME_ALPHABETICAL",e.ALBUM_CREATOR_NAME="ALBUM_CREATOR_NAME",e.RECENTLY_PLAYED="RECENTLY_PLAYED",e.MOST_RELEVANT="MOST_RELEVANT",e.CUSTOM_ORDER="CUSTOM_ORDER"}(i||(i={}));const l={"show-alphabetical":i.SHOW_ALPHABETICAL,"book-alphabetical":i.BOOK_ALPHABETICAL,"episode-alphabetical":i.EPISODE_ALPHABETICAL,"playlist-alphabetical":i.PLAYLIST_ALPHABETICAL,"album-alphabetical":i.ALBUM_ALPHABETICAL,"recently-added":i.ADDED_AT,"creator-name":i.CREATOR_NAME,"creator-name-alphabetical":i.CREATOR_NAME_ALPHABETICAL,"album-creator-name":i.ALBUM_CREATOR_NAME,"recently-played":i.RECENTLY_PLAYED,"playlist-most-relevant":i.MOST_RELEVANT,"playlist-custom-order":i.CUSTOM_ORDER},o={[i.RECENTLY_PLAYED]:{key:"recently-played",get value(){return s.ag.get("collection.sort.recently-played")}},[i.ADDED_AT]:{key:"recently-added",get value(){return s.ag.get("collection.sort.recently-added")}},[i.SHOW_ALPHABETICAL]:{key:"show-alphabetical",get value(){return s.ag.get("collection.sort.alphabetical")}},[i.BOOK_ALPHABETICAL]:{key:"book-alphabetical",get value(){return s.ag.get("collection.sort.alphabetical")}},[i.EPISODE_ALPHABETICAL]:{key:"episode-alphabetical",get value(){return s.ag.get("collection.sort.alphabetical")}},[i.PLAYLIST_ALPHABETICAL]:{key:"playlist-alphabetical",get value(){return s.ag.get("collection.sort.alphabetical")}},[i.ALBUM_CREATOR_NAME]:{key:"album-creator-name",get value(){return s.ag.get("collection.sort.creator")}},[i.CREATOR_NAME]:{key:"creator-name",get value(){return s.ag.get("collection.sort.creator")}},[i.CREATOR_NAME_ALPHABETICAL]:{key:"creator-name-alphabetical",get value(){return s.ag.get("collection.sort.alphabetical")}},[i.ALBUM_ALPHABETICAL]:{key:"album-alphabetical",get value(){return s.ag.get("collection.sort.alphabetical")}},[i.MOST_RELEVANT]:{key:"playlist-most-relevant",get value(){return s.ag.get("collection.sort.most-relevant")}},[i.CUSTOM_ORDER]:{key:"playlist-custom-order",get value(){return s.ag.get("collection.sort.custom-order")}}},c=[i.ADDED_AT,i.ALBUM_ALPHABETICAL,i.CREATOR_NAME],u={[i.ADDED_AT]:{field:n.lY.ADDED_AT,order:n.As.DESC},[i.ALBUM_ALPHABETICAL]:{field:n.lY.NAME,order:n.As.ASC},[i.CREATOR_NAME]:{field:n.lY.ARTIST_NAME,order:n.As.ASC}};const d=e=>{if(function(e){return c.includes(e)}(e))return u[e]},m=[i.ADDED_AT,i.CREATOR_NAME_ALPHABETICAL],p={[i.ADDED_AT]:{field:n.hx.ADDED_AT,order:n.As.DESC},[i.CREATOR_NAME_ALPHABETICAL]:{field:n.hx.NAME,order:n.As.ASC}};const h=e=>{if(function(e){return m.includes(e)}(e))return p[e]},g=[i.ADDED_AT,i.SHOW_ALPHABETICAL],A={[i.ADDED_AT]:{field:n.aW.ADDED_AT,order:n.As.DESC},[i.SHOW_ALPHABETICAL]:{field:n.aW.NAME,order:n.As.ASC}};const x=e=>{if(function(e){return g.includes(e)}(e))return A[e]},f=[i.ADDED_AT,i.BOOK_ALPHABETICAL],E={[i.ADDED_AT]:n.VN.ADDED_AT,[i.BOOK_ALPHABETICAL]:n.VN.NAME};const C=e=>{if(function(e){return f.includes(e)}(e))return E[e]},y=[i.MOST_RELEVANT,i.RECENTLY_PLAYED,i.ADDED_AT,i.PLAYLIST_ALPHABETICAL,i.CUSTOM_ORDER],b={[i.ADDED_AT]:{field:r.bD.ADDED_AT,order:r.As.DESC},[i.RECENTLY_PLAYED]:{field:r.bD.RECENTLY_PLAYED,order:r.As.ASC},[i.PLAYLIST_ALPHABETICAL]:{field:r.bD.NAME,order:r.As.ASC},[i.MOST_RELEVANT]:{field:r.bD.RELEVANCE,order:r.As.DESC},[i.CUSTOM_ORDER]:void 0};const j=e=>{if(function(e){return y.includes(e)}(e))return b[e]},L=i.ADDED_AT,T=i.ADDED_AT,S=i.ADDED_AT,D=i.MOST_RELEVANT,I=i.ADDED_AT},99535:(e,t,a)=>{a.d(t,{h:()=>p});var s=a(59496),n=a(69875),r=a(4086),i=a(13034),l=a(83590),o=a(60691),c=a(61919),u=a(4637);const d=s.memo((function({sortOptions:e,onSort:t}){const{sortState:a,setSortState:n}=(0,s.useContext)(o.Q),r=(0,s.useCallback)((e=>{const a=c.ei[e];t?.(a),n(a)}),[t,n]),i=e.map((e=>c.MY[e])),d=c.MY[a];return(0,u.jsx)(l.A,{options:i,onSelect:r,selected:d})})),m="collection-searchBar-searchBar",p=s.memo((function({canSort:e,canFilter:t,filterPlaceholder:a,sortOptions:l}){const{spec:o,logger:c}=(0,i.fU)(n.createDesktopSearchBarEventFactory,{}),p=(0,s.useCallback)((()=>{c.logInteraction(o.filterFieldFactory().keyStrokeFilter())}),[c,o]),h=(0,s.useCallback)((()=>{c.logInteraction(o.filterFieldFactory().hitClearFilter())}),[c,o]),g=(0,s.useCallback)((()=>{c.logInteraction(o.sortButtonFactory().hitSort())}),[c,o]);return(0,u.jsxs)("div",{className:m,children:[t?(0,u.jsx)(s.Suspense,{fallback:null,children:(0,u.jsx)(r.K,{placeholder:a,onFilter:p,onClear:h})}):null,e?(0,u.jsx)(d,{sortOptions:l,onSort:g}):null]})}))},3949:(e,t,a)=>{a.d(t,{$:()=>s.$,Q:()=>s.Q});var s=a(60691)},38201:(e,t,a)=>{a.d(t,{Aq:()=>s.Aq,Bf:()=>s.Bf,EY:()=>s.EY,G5:()=>s.G5,JV:()=>s.JV,Ru:()=>s.Ru,ZP:()=>s.ZP,a6:()=>s.a6,aY:()=>s.aY,e3:()=>s.e3,o$:()=>s.o$,oT:()=>s.oT,pT:()=>s.pT,rJ:()=>s.rJ,u3:()=>s.u3,w0:()=>s.w0});var s=a(61919)},7191:(e,t,a)=>{a.r(t),a.d(t,{default:()=>rt});var s=a(59496),n=a(90641),r=a(92053),i=a(33366),l=a(6063),o=a(80326),c=a(86417),u=a(66365),d=a(85388),m=a(52284),p=a(53083),h=a(41622),g=a(86440),A=a(84875),x=a.n(A),f=a(24581),E=a(8566),C=a(50683),y=a(47262),b=a(95441),j=a(4637);const L=(0,s.memo)((function({index:e}){return(0,j.jsx)(y.C,{index:e,headerText:"",uri:"",renderCardImage:()=>(0,j.jsx)(b.x,{images:[]}),featureIdentifier:"unknown"})})),T="lA3jnNwnLc3CoYKT06Vz";function S({renderCard:e,nrCards:t,fetchData:a,limit:n=50,cardGridApiRef:r}){const{scrollNodeRef:i}=(0,s.useContext)(E.VX),{getItems:l,nrValidItems:o,invalidateCache:c,hasItems:u}=(0,C.Q)({nrItems:t,fetch:a,limit:n});(0,s.useImperativeHandle)(r,(()=>({update:()=>c()})));return(0,j.jsx)("div",{className:x()({[T]:!u}),children:(0,j.jsx)(f.u,{renderItems:(t,a,s)=>l(t,a).map(((a,n)=>(a?e(a,t+n,s):null)??(0,j.jsx)(L,{index:n},t+n))),scrollNodeRef:i,nrItems:o,estimatedItemMaxHeight:250})})}var D=a(4263),I=a(27293),_=a(91682),v=a(89199),R=a(23351),k=a(37833),O=a(13034),P=a(80244),N=a(65659);const B={offset:0,limit:1},w=()=>{const e=(0,s.useContext)(k.H);return(e=>{const[t,a]=(0,s.useState)(null),n=(0,s.useCallback)((async()=>{if(!e)return;const t=await e();a(t?.totalLength||0)}),[e]);return(0,s.useEffect)((()=>{null===t&&n()}),[t,n]),{total:t}})((0,s.useCallback)((()=>e?e?.getShows(B):Promise.resolve({totalLength:0})),[e]))},M=()=>{const e=(0,s.useContext)(k.H),[t,a]=(0,s.useState)(null),n=(0,s.useCallback)((async()=>{if(!e)return;const t=await(e?.getBooks(B));a(t?.totalLength||0)}),[e]);return(0,s.useEffect)((()=>{null===t&&n()}),[t,n]),(0,N.b)(P.EW.UPDATE,n),{total:t}};var H=a(99535),Y=a(3949),U=a(38201),F=a(41489);const W=s.memo((function({nrAlbums:e}){const t=(0,s.useContext)(k.H),{filter:a}=(0,s.useContext)(_.fo),{sortState:n}=(0,s.useContext)(Y.Q),r=(0,s.useRef)(null),{spec:i,UBIFragment:c}=(0,O.fU)(h.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:albums",identifier:l.Wg.YOURLIBRARY_ALBUMS}}),u=(0,s.useMemo)((()=>i.headerFactory()),[i]),d=(0,s.useCallback)((async(e,s)=>{const r=await t.getAlbums({offset:e,limit:s,filter:a,sort:(0,U.Aq)(n)});return{items:r.items,totalLength:r.totalLength}}),[t,a,n]),m=(0,s.useCallback)(((e,t)=>(0,j.jsx)(R.ZP,{value:"card",index:t,children:(0,j.jsx)(g.r,{index:t,uri:e.uri,name:e.name,images:e.images,artists:e.artists,sharingInfo:e.sharingInfo})},e.uri)),[]);return(0,j.jsxs)(c,{spec:i,children:[(0,j.jsx)(c,{spec:u,children:(0,j.jsxs)("div",{className:F.Z.header,children:[(0,j.jsx)(p.D,{as:"h1",variant:"canon",children:o.ag.get("albums")}),(0,j.jsx)(s.Suspense,{fallback:null,children:(0,j.jsx)(H.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.albums"),sortOptions:U.Ru})})]})}),(0,j.jsx)(S,{nrCards:e,renderCard:m,fetchData:d,cardGridApiRef:r})]})})),V=s.memo((function(){const{total:e}=(()=>{const e=(0,s.useContext)(k.H),[t,a]=(0,s.useState)(null),n=(0,s.useCallback)((async()=>{if(!e)return;const t=await(e?.getAlbums(B));a(t?.totalLength||0)}),[e]);return(0,s.useEffect)((()=>{null===t&&n()}),[t,n]),(0,N.b)(P.EW.UPDATE,n),{total:t}})();return null===e?(0,j.jsx)(I.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-albums-failure")}):e?(0,j.jsx)(W,{nrAlbums:e}):(0,j.jsx)(D.u,{linkTo:"/search",linkTitle:o.ag.get("collection.empty-page.albums-cta"),message:o.ag.get("collection.empty-page.albums-subtitle"),title:o.ag.get("collection.empty-page.albums-title"),children:(0,j.jsx)(v.t,{type:"album"})})})),Z=s.memo((function(){return(0,j.jsx)(Y.$,{uri:"collection/albums",defaultSortOption:U.aY,children:(0,j.jsx)(_.hz,{uri:"collection/albums",children:(0,j.jsx)(V,{})})})}));var G=a(86431);const K=s.memo((function({nrArtists:e}){const t=(0,s.useContext)(k.H),{filter:a}=(0,s.useContext)(_.fo),{sortState:n}=(0,s.useContext)(Y.Q),r=(0,s.useRef)(null),{spec:i,UBIFragment:c}=(0,O.fU)(h.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:artists",identifier:l.Wg.YOURLIBRARY_ARTISTS}}),u=(0,s.useMemo)((()=>i.headerFactory()),[i]),d=(0,s.useCallback)((async(e,s)=>{const r=await t.getArtists({offset:e,limit:s,filter:a,sort:(0,U.e3)(n)});return{items:r.items,totalLength:r.totalLength}}),[t,a,n]),m=(0,s.useCallback)(((e,t)=>(0,j.jsx)(R.ZP,{value:"card",index:t,children:(0,j.jsx)(G.I,{index:t,name:e.name,uri:e.uri,images:e.images})},e.uri)),[]);return(0,s.useEffect)((()=>{r.current&&r.current.update()}),[n,a,e]),(0,j.jsxs)(c,{spec:i,children:[(0,j.jsx)(c,{spec:u,children:(0,j.jsxs)("div",{className:F.Z.header,children:[(0,j.jsx)(p.D,{as:"h1",variant:"canon",children:o.ag.get("artists")}),(0,j.jsx)(s.Suspense,{fallback:null,children:(0,j.jsx)(H.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.artists"),sortOptions:U.o$})})]})}),(0,j.jsx)(S,{nrCards:e,renderCard:m,fetchData:d,cardGridApiRef:r})]})})),J=s.memo((function(){const{total:e}=(()=>{const e=(0,s.useContext)(k.H),[t,a]=(0,s.useState)(null),n=(0,s.useCallback)((async()=>{if(!e)return;const t=await(e?.getArtists(B));a(t?.totalLength||0)}),[e]);return(0,s.useEffect)((()=>{null===t&&n()}),[t,n]),(0,N.b)(P.EW.UPDATE,n),{total:t}})();return null===e?(0,j.jsx)(I.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-artists-failure")}):e>0?(0,j.jsx)(K,{nrArtists:e}):(0,j.jsx)(D.u,{message:o.ag.get("collection.empty-page.artists-subtitle"),title:o.ag.get("collection.empty-page.artists-title"),linkTo:"/search",linkTitle:o.ag.get("collection.empty-page.artists-cta"),children:(0,j.jsx)(v.t,{type:"artist"})})})),Q=s.memo((function(){return(0,j.jsx)(Y.$,{uri:"collection/artists",defaultSortOption:U.u3,children:(0,j.jsx)(_.hz,{uri:"collection/artists",children:(0,j.jsx)(J,{})})})}));var z=a(84966);const X=s.memo((function({nrBooks:e}){const t=(0,s.useContext)(k.H),{filter:a}=(0,s.useContext)(_.fo),{sortState:n}=(0,s.useContext)(Y.Q),{spec:r,UBIFragment:i}=(0,O.fU)(h.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:audiobooks",identifier:l.Wg.YOURLIBRARY_AUDIOBOOKS}}),c=(0,s.useMemo)((()=>r.headerFactory()),[r]),u=(0,s.useRef)(null),d=(0,s.useCallback)((async(e,s)=>{const r=await t.getBooks({offset:e,limit:s,filter:a,sort:(0,U.G5)(n)});return{items:r.items.map((e=>(e=>""===e.authorName&&""===e.name)(e)?null:e)),totalLength:r.totalLength}}),[t,a,n]),m=(0,s.useCallback)(((e,t)=>(0,j.jsx)(R.ZP,{value:"card",index:t,children:(0,j.jsx)(z.c,{index:t,uri:e.uri,name:e.name,images:e.images,authorName:e.authorName,isLocked:e.isLocked})},e.uri)),[]);return(0,j.jsxs)(i,{spec:r,children:[(0,j.jsx)(i,{spec:c,children:(0,j.jsxs)("div",{className:F.Z.header,children:[(0,j.jsx)(p.D,{as:"h1",variant:"canon",children:o.ag.get("search.title.audiobooks")}),(0,j.jsx)(H.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:"Search in Audiobooks",sortOptions:U.ZP})]})}),(0,j.jsx)(S,{nrCards:e,renderCard:m,fetchData:d,cardGridApiRef:u})]})})),q=s.memo((function(){const{total:e}=M();return null===e?(0,j.jsx)(I.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-albums-failure")}):e>0?(0,j.jsx)(X,{nrBooks:e}):(0,j.jsx)(D.u,{linkTo:"/search",linkTitle:o.ag.get("collection.empty-page.books-cta"),message:o.ag.get("collection.empty-page.books-subtitle"),title:o.ag.get("collection.empty-page.books-title"),children:(0,j.jsx)(v.t,{type:"book"})})})),$=s.memo((function(){return(0,j.jsx)(Y.$,{uri:"collection/books",defaultSortOption:U.JV,children:(0,j.jsx)(_.hz,{uri:"collection/books",children:(0,j.jsx)(q,{})})})}));var ee=a(81785),te=a(35799),ae=a(17657),se=a(78217),ne=a(90974),re=a(34437),ie=a(82250),le=a(22924),oe=a(84563),ce=a(68765),ue=a(4899),de=a(17968);const me=function({uri:e,name:t,images:a,index:n}){const r=(0,ie.u)(),i=(0,s.useRef)(null),l=(0,s.useRef)(!0),c=(0,s.useContext)(le.t),{isPlaying:u}=(0,ue.cR)(re.b),{togglePlay:d}=(0,ce.n)({uri:re.b,pages:[{items:i.current?.map((e=>({...e,provider:null})))||[]}]},{featureIdentifier:"local_files"});(0,s.useEffect)((()=>(l.current=!0,()=>{l.current=!1})),[]);const m=(0,oe.I)(),p=(0,ae.y1)((async(e,t)=>{if(!i.current){const e=await c.getTracks();i.current=e}l&&d({loggingParams:t},{uri:re.b,pages:[{items:i.current?.map((e=>({...e,provider:null})))||[]}]})}),ne.s_,{leading:!0,trailing:!1});return r.canFetchAllTracks&&m?(0,j.jsx)(y.Z,{index:n,delegatePlayback:!0,delegateLogging:!0,isPlaying:u,onPlay:p,headerText:t,featureIdentifier:"local_files",uri:e,renderCardImage:()=>(0,j.jsx)(b.x,{images:a,FallbackComponent:de.S}),renderSubHeaderContent:()=>(0,j.jsx)("span",{children:o.ag.get("local-files.description")})}):null},pe=({index:e})=>{const t=(0,se.gB)();return(0,j.jsx)(s.Suspense,{fallback:null,children:(0,j.jsx)(me,{index:e,name:t.name,uri:t.uri,images:t.images})})};var he=a(23742),ge=a(78718),Ae=a(81434),xe=a(15310),fe=a(10277),Ee=a(16020),Ce=a(23731),ye=a(42741),be=a(71816),je=a(74140);const Le="collection-collectionEntityHeroCard-likedSongs",Te="collection-collectionEntityHeroCard-container",Se="kST1INfbHSxzydJffBq_",De="collection-collectionEntityHeroCard-headerContainer",Ie="collection-collectionEntityHeroCard-tracksContainer",_e="lBs1v3T3HAPrOxfyWemr",ve="collection-collectionEntityHeroCard-descriptionContainer",Re="d8ifuAZX8mK644AwlRZK";function ke(e,t){return Array.from(new Array(e).keys()).map((e=>(0,j.jsx)(je.C,{as:"div",className:_e,charCount:t,isLoading:!0},e)))}const Oe=({index:e,onClick:t})=>{const a=(0,be.MY)({limit:7}),{user:s}=(0,n.v9)(xe.Gg),r=(0,se.I2)(s?.id);return r?(0,j.jsx)(ye.Z,{index:e,className:x()(Le,Te),onClick:t,headerText:r.name,featureIdentifier:"your_library",uri:r.uri,ariaPlayLabel:o.ag.get("playlist.a11y.play",r.name),ariaPauseLabel:o.ag.get("playlist.a11y.pause",r.name),renderCardImage:()=>{return(0,j.jsx)("div",{className:De,children:(0,j.jsx)("div",{className:Ie,children:a?(e=a,e.items.map((({uri:e,name:t,artists:[a]},s)=>(0,j.jsxs)("span",{children:[(0,j.jsx)("span",{className:Re,children:s?" • ":""}),(0,j.jsx)("span",{dir:"auto",children:a.name}),(0,j.jsx)("span",{dir:"auto",className:Re,children:t})]},e)))):ke(3)})});var e},renderSubHeaderContent:()=>(0,j.jsx)("div",{className:ve,children:a?`${a.totalLength} ${r.name}`:ke(1,r.name.length)})}):null},Pe=(e,t,a)=>(0,j.jsx)(R.ZP,{value:"card",index:t,children:a},`${e.uri}`??0),Ne=(e,t,a)=>{switch(e.type){case Ee.p.LIKED_SONGS:return Pe(e,t,a>1?(0,j.jsx)(Oe,{index:t},e.uri):(0,j.jsx)(te.p,{index:t},e.uri));case Ee.p.YOUR_EPISODES:return Pe(e,t,(0,j.jsx)(ge.T,{index:t},e.uri));case Ee.p.LOCAL_FILES:return Pe(e,t,(0,j.jsx)(pe,{index:t},e.uri));case Ee.p.PLAYLIST:return Pe(e,t,(0,j.jsx)(ee.Z,{index:t,name:e.name,uri:e.uri,images:e.images,description:e.description,authorName:e.owner?.displayName,isPlayable:e.totalLength>0},e.uri));case"placeholder":return Pe(e,t,(0,j.jsx)(ee.Z,{index:t,uri:e.uri,name:"",images:[],description:"",authorName:""},e.uri));case"empty":return(0,j.jsx)(s.Fragment,{},t);case"folder":return null;default:return(0,Ce._)(e),null}},Be=s.memo((function({nrPlaylists:e,showYourEpisodesCard:t,showLocalFilesCard:a}){const{filter:r}=(0,s.useContext)(_.fo),{sortState:i}=(0,s.useContext)(Y.Q),c=(0,s.useContext)(fe.BS),u=(0,s.useRef)(null),d=(0,n.v9)(xe.Gg).user,{spec:m,UBIFragment:g}=(0,O.fU)(h.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:playlists",identifier:l.Wg.YOURLIBRARY_PLAYLISTS}}),A=(0,s.useMemo)((()=>m.headerFactory()),[m]),x=(0,s.useMemo)((()=>{const e=[];if(r)return e;const s=(0,se.I2)(d?.id);s&&(e.push(s),e.push({uri:"",type:"empty"}));const n=t?(0,se.bl)(d?.id):null;n&&e.push(n);const i=a?(0,se.gB)():null;return i&&e.push(i),e}),[r,a,t,d]),f=(0,s.useCallback)((()=>{u?.current&&u.current.update()}),[u]);(0,fe.iu)(f);const E=(0,s.useCallback)((async(e,t)=>{const a=x.slice(e),s=e-(x.length-a.length),n=await c.getContents({offset:s,limit:t,filter:r,sort:(0,U.pT)(i),flatten:!0,decorateImagesAndOwner:!0}),l=n.items.map((e=>"placeholder"===e.type?null:e));return{items:[...a,...l],totalLength:n.totalItemCount+x.length}}),[x,c,r,i]);return(0,j.jsxs)(g,{spec:m,children:[(0,j.jsx)(g,{spec:A,children:(0,j.jsxs)("div",{className:F.Z.header,children:[(0,j.jsx)(p.D,{as:"h1",variant:"canon",children:o.ag.get("playlists")}),(0,j.jsx)(s.Suspense,{fallback:null,children:(0,j.jsx)(H.h,{canSort:c.getCapabilities().canSort,canFilter:c.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.playlists"),sortOptions:U.w0})})]})}),(0,j.jsx)(S,{nrCards:e+x.length,renderCard:Ne,fetchData:E,cardGridApiRef:u})]})})),we=s.memo((function(){const e=(0,fe.Rt)(),t=(0,he.x)(),a=(0,ie.u)(),{createPlaylist:n}=(0,Ae.K)(),r=(0,oe.I)(),i=(0,s.useCallback)((()=>{n()}),[n]);return null===e||null===t?(0,j.jsx)(I.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-albums-failure")}):e?.playlistCount?(0,j.jsx)(Be,{nrPlaylists:e.playlistCount,showYourEpisodesCard:t.totalLength>0,showLocalFilesCard:a.canFetchAllTracks&&r}):(0,j.jsx)(D.u,{linkTitle:o.ag.get("collection.empty-page.playlists-cta"),onClick:i,title:o.ag.get("collection.empty-page.playlists-title"),message:o.ag.get("collection.empty-page.playlists-subtitle"),children:(0,j.jsx)(v.t,{type:"playlist"})})})),Me=s.memo((function(){return(0,j.jsx)(Y.$,{uri:"collection/playlists",defaultSortOption:U.Bf,children:(0,j.jsx)(_.hz,{uri:"collection/playlists",children:(0,j.jsx)(we,{})})})}));var He=a(20148),Ye=a(27874),Ue=a(15469),Fe=a(10236),We=a(44223);const Ve=()=>{const e="ginger-audio-shows-top-20-web",{view:t}=(0,Ye.P)(e);if(!t)return null;const{content:a,name:s}=t,{total:n=0,items:r}=a;return(0,j.jsx)(We.P,{title:s,total:n,seeAllUri:(0,Ue.p)(e),children:r.filter((e=>"show"===e.type)).map(((e,t)=>(0,j.jsx)(He._,{name:e.name,uri:e.uri,images:e.images,publisher:e.publisher,mediaType:{audio:Fe.E.AUDIO,video:Fe.E.VIDEO,mixed:Fe.E.MIXED}[e.media_type]??Fe.E.AUDIO,sharingInfo:null,index:t},e.uri)))})};var Ze=a(1578),Ge=a(89860),Ke=a(4797);function Je(e,t){return Array.from(new Array(e).keys()).map((e=>(0,j.jsx)(je.C,{as:"div",className:_e,charCount:t,isLoading:!0},e)))}const Qe=({index:e})=>{const t=(0,be.j$)({limit:7}),{user:a}=(0,n.v9)(xe.Gg),s=(0,se.bl)(a?.id);return s?(0,j.jsx)(ye.Z,{index:e,className:x()(Le,Se),headerText:s.name,featureIdentifier:"your_library",uri:s.uri,ariaPlayLabel:o.ag.get("playlist.a11y.play",s.name),ariaPauseLabel:o.ag.get("playlist.a11y.pause",s.name),renderCardImage:()=>{return(0,j.jsx)("div",{className:De,children:(0,j.jsx)("div",{className:Ie,children:t?(e=t,e.items.map((({uri:e,name:t,show:a},s)=>(0,j.jsxs)("span",{children:[(0,j.jsx)("span",{className:Re,children:s?" • ":""}),(0,j.jsx)("span",{dir:"auto",children:t}),a&&(0,j.jsx)("span",{dir:"auto",className:Re,children:a.name})]},e)))):Je(3)})});var e},renderSubHeaderContent:()=>(0,j.jsx)("div",{className:ve,children:t?o.ag.get("tracklist-header.episodes-counter",t.totalLength):Je(1,s.name.length)})}):null},ze=s.memo((function({nrShows:e}){const t=(0,s.useContext)(k.H),{filter:a}=(0,s.useContext)(_.fo),{sortState:r}=(0,s.useContext)(Y.Q),i=(0,s.useRef)(!1),c=(0,s.useRef)({entities:[],total:e}),[u,d]=(0,s.useState)(0),{user:m}=(0,n.v9)(xe.Gg),{spec:g,UBIFragment:A}=(0,O.fU)(h.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:podcasts",identifier:l.Wg.YOURLIBRARY_SHOWS}}),x=(0,s.useMemo)((()=>g.headerFactory()),[g]),f=(0,s.useCallback)((async(e,s,n=!1)=>{if(!i.current){i.current=!n;const l=await t.getShows({offset:e,limit:s,filter:a,sort:(0,U.EY)(r)});c.current=function(e,t,a){const s={...a};return s.entities=t?e.items||[]:s.entities.concat(e.items||[]),s.total=e.totalLength,s}(l,n,c.current),i.current=!1,d((e=>e+1))}}),[t,a,r,c]),E=(0,s.useCallback)((e=>{c.current=function(e,t){const a={...t},s=t.entities.filter((t=>t.uri!==e));return a.total=(t.total||0)-(t.entities.length-s.length),a.entities=s,a}(e,c.current),d((e=>e+1))}),[]);(0,s.useEffect)((()=>{f(0,50,!!u)}),[a,r]);const C=(0,s.useCallback)((()=>{c.current.entities.length!==c.current.total&&f(c.current.entities.length,50)}),[f,c]);return(0,j.jsx)(A,{spec:g,children:(0,j.jsxs)(Ge.C,{onReachBottom:C,children:[(0,j.jsx)(A,{spec:x,children:(0,j.jsxs)("div",{className:F.Z.header,children:[(0,j.jsx)(p.D,{as:"h1",variant:"canon",children:o.ag.get("podcasts")}),(0,j.jsx)(s.Suspense,{fallback:null,children:(0,j.jsx)(H.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.podcasts"),sortOptions:U.a6})})]})}),(0,j.jsx)(Ke.r,{onLibraryItemRemove:E,children:(0,j.jsx)(R.ZP,{value:"EntitiesGrid",children:(0,j.jsx)(Ze.T,{render:()=>{const e=(0,se.bl)(m?.id),t=a||!e||0===c.current.entities.length?[]:[(0,j.jsx)(s.Suspense,{fallback:null,children:(0,j.jsx)(Qe,{index:0})},"your-episodes-card")],n=t.length>0;return t.concat(c.current.entities.map(((e,t)=>{const a=n?t+1:t;return(0,j.jsx)(R.ZP,{value:"card",index:a,children:(0,j.jsx)(He._,{index:a,name:e.name,uri:e.uri,images:e.images,publisher:e.publisher,sharingInfo:null})},e.uri)})))}})})})]})})})),Xe=s.memo((function(){const{total:e}=w(),{productState:t}=(0,n.v9)(xe.Gg),a=!!t&&parseInt(t.ads,10)>0;return null===e?(0,j.jsx)(I.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-shows-failure")}):e?(0,j.jsx)(ze,{nrShows:e}):(0,j.jsxs)("div",{className:x()(F.Z.emptyStateContainer,{[F.Z.adBarEnabled]:a}),children:[(0,j.jsx)(D.u,{linkTo:"/genre/podcasts-web",linkTitle:o.ag.get("collection.empty-page.shows-cta"),message:o.ag.get("collection.empty-page.shows-subtitle"),title:o.ag.get("collection.empty-page.shows-title"),renderInline:!0,children:(0,j.jsx)(v.t,{type:"show"})}),(0,j.jsx)(Ve,{})]})})),qe=s.memo((function(){return(0,j.jsx)(Y.$,{uri:"collection/podcasts",defaultSortOption:U.rJ,children:(0,j.jsx)(_.hz,{uri:"collection/podcasts",children:(0,j.jsx)(Xe,{})})})}));var $e=a(11042),et=a(23871),tt=a(60037);const at=({isAudiobooksEnabled:e})=>{const t=(0,n.v9)(m.rH),{spec:a,logger:r}=(0,O.fU)($e.createDesktopLibraryTopbarEventFactory,{}),i=(0,s.useMemo)((()=>[{title:o.ag.get("playlists"),itemId:"collection.tab-playlists",to:"/collection/playlists",uri:"spotify:app:collection:playlists"},...t?[{title:o.ag.get("podcasts"),itemId:"collection.tab-podcasts",to:"/collection/podcasts",uri:"spotify:app:collection:podcasts"}]:[],...e?[{title:o.ag.get("search.title.audiobooks"),itemId:"collection.tab-audiobooks",to:"/collection/audiobooks",uri:"spotify:app:collection:audiobooks"}]:[],{title:o.ag.get("artists"),itemId:"collection.tab-artists",to:"/collection/artists",uri:"spotify:app:collection:artists"},{title:o.ag.get("albums"),itemId:"collection.tab-albums",to:"/collection/albums",uri:"spotify:app:collection:albums"}].map(((e,t)=>{const s=e.uri;return{...e,handleClick:()=>{const e=a.linkFactory({position:t,uri:s}).hitUiNavigate({destination:s});r.logInteraction(e)}}}))),[t,e,r,a]);return(0,j.jsx)(tt.w,{children:(0,j.jsx)(et.n,{className:F.Z.tabBar,links:i})})};var st=a(98633);const nt=s.lazy((async()=>await a.e(4246).then(a.bind(a,22490)))),rt=()=>{const e=(0,n.v9)(m.rH),t=(0,i.W6)(d.uB);(0,u.z)("your_library");const{total:a}=M(),s=!!(a&&a>0);return(0,j.jsxs)("section",{className:"contentSpacing",children:[(0,j.jsx)(c.$,{children:o.ag.get("collection.page-title")}),(0,j.jsxs)(r.Z5,{children:[(0,j.jsx)(r.AW,{path:"artists",element:(0,j.jsx)(st.K,{pageId:l.Wg.YOURLIBRARY_ARTISTS,children:(0,j.jsx)(Q,{})})}),(0,j.jsx)(r.AW,{path:"albums",element:(0,j.jsx)(st.K,{pageId:l.Wg.YOURLIBRARY_ALBUMS,children:(0,j.jsx)(Z,{})})}),(0,j.jsx)(r.AW,{path:"playlists",element:(0,j.jsx)(st.K,{pageId:l.Wg.YOURLIBRARY_PLAYLISTS,children:(0,j.jsx)(Me,{})})}),e&&(0,j.jsx)(r.AW,{path:"podcasts",element:(0,j.jsx)(st.K,{pageId:l.Wg.YOURLIBRARY_SHOWS,children:(0,j.jsx)(qe,{})})}),(t||s)&&(0,j.jsx)(r.AW,{path:"audiobooks",element:(0,j.jsx)(st.K,{pageId:l.Wg.YOURLIBRARY_AUDIOBOOKS,children:(0,j.jsx)($,{})})}),(0,j.jsx)(r.AW,{path:"music-downloads",element:(0,j.jsx)(st.K,{pageId:l.Wg.YOURLIBRARY_DOWNLOADS,children:(0,j.jsx)(nt,{})})})]}),(0,j.jsx)(at,{isAudiobooksEnabled:t||s})]})}},49990:(e,t,a)=>{a.d(t,{e:()=>p});var s=a(10680);const n="(min-width: 0px)",r="(min-width: 0px) and (max-width: 767px)",i="(min-width: 768px)",l="(min-width: 768px) and (max-width: 1023px)",o="(min-width: 1024px)",c="(min-width: 1024px) and (max-width: 1279px)",u="(min-width: 1280px)",d="(min-width: 1280px) and (max-width: 1919px)",m="(min-width: 1920px)",p=()=>({isXS:(0,s.a)(n),isXSOnly:(0,s.a)(r),isSM:(0,s.a)(i),isSMOnly:(0,s.a)(l),isMD:(0,s.a)(o),isMDOnly:(0,s.a)(c),isLG:(0,s.a)(u),isLGOnly:(0,s.a)(d),isXL:(0,s.a)(m)})},27874:(e,t,a)=>{a.d(t,{P:()=>p});var s=a(59496),n=a(75387),r=a(39359),i=a(13870),l=a(90641),o=a(33366),c=a(80326),u=a(29977),d=a(15310),m=a(21654);const p=(e,t)=>{const a=(()=>{const e=(0,o.W6)(m.Xf),t=(0,l.v9)(u.rZ),{overrides:a}=(0,l.v9)(d.Gg),n=c.ag.getLocale(),r=a?.country||t,i=a?.locale||n;return(0,s.useMemo)((()=>{const t=["album","playlist","artist","show","station","episode","merch","artist_concerts"];return e&&t.push("uri_link"),{country:r,locale:i,types:t.join(",")}}),[r,e,i])})(),{data:p,fetchNextPage:h}=(0,n.useInfiniteQuery)(["useView",e,a],(async({pageParam:t})=>void 0===t?async function(e,t){const{body:a}=await i.kO.getView(r.b.getInstance(),e,t);return a}(e,a):async function(e){const{body:t}=await i.TV.getGeneric(r.b.getInstance(),e,"/useView/fetchNext/{next}");return t}(t)),{cacheTime:t?.cacheTime??18e5,staleTime:t?.staleTime??3e5,getNextPageParam:e=>e.content.next??void 0,getPreviousPageParam:e=>e.content.previous??void 0});return{view:(0,s.useMemo)((()=>p?.pages.reduce(((e,t)=>({...e,content:{...e.content,href:t.content.href,next:t.content.next,offset:t.content.offset,previous:t.content.previous,total:t.content.total,items:e.content.items.concat(t.content.items)}})))),[p?.pages]),getNextPage:h}}},41489:(e,t,a)=>{a.d(t,{Z:()=>s});const s={header:"collection-collection-header",tabBar:"collection-collection-tabBar",AddToPlaylistIcon:"collection-collection-AddToPlaylistIcon",emptyStateContainer:"collection-collection-emptyStateContainer",adBarEnabled:"collection-collection-adBarEnabled"}}}]);
//# sourceMappingURL=xpui-routes-collection.js.map