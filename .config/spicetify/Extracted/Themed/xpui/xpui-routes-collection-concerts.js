"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5835],{4263:(e,n,t)=>{t.d(n,{u:()=>p});var s=t(59496),a=t(84875),i=t.n(a),o=t(53083),c=t(6923),r=t(49990),l=t(93711);const d="FvfvGU3jvHRskUU9v9_8",m="Q9AlbZn2EGzy3MTWXa8X",h="mxmxS0y8LiwSs5nueKPT",u="GXxVAveNFStY3pBI_NO4",v="eHcXC2s97InYP7rMNT0H";var g=t(4637);const p=(0,s.memo)((function(e){const{children:n,message:t,title:s,linkTitle:a,linkTo:p,onClick:x,renderInline:j=!1}=e,{isXSOnly:N,isSMOnly:f}=(0,r.e)(),b=N||f;return(0,g.jsxs)("section",{className:i()(d,{[m]:j}),children:[n,(0,g.jsx)(o.D,{as:"h1",variant:b?"cello":"alto",className:u,children:s}),(0,g.jsx)(o.D,{variant:b?"mesto":"ballad",className:v,children:t}),a&&(p||x)&&(0,g.jsx)(c.D,{colorSet:"invertedLight",className:h,href:p,onClick:x,component:l.Z,children:a})]})}))},86716:(e,n,t)=>{t.d(n,{Z:()=>f});var s=t(59496),a=t(53083),i=t(80326),o=t(3777),c=t(30985),r=t(38698),l=t(31386),d=t(50838);const m="MUiWCNTfb6FcSwVPvQ1V",h="UAk3bMhekwJTV_wIyfsT",u="X9w6LPfKsZHMCs38sVIQ",v="NXn5KjeUOjLGlAfS1Gao",g="N0wgFMDDvCiby4QB5kLJ",p="nloNe2BLRHjz9dxlwfLU",x="JzXND83mXvcEuntCNR34",j="GR08E4L_rOGljyQQX30R";var N=t(4637);const f=(0,s.memo)((e=>{const{concert:n,isVirtual:t,onClick:s}=e,{venue:f,location:b}=n,k=n.artists[0],y=(0,l.CH)(n.startDate.localDate);return(0,N.jsxs)(o.Link,{to:`/concert/${n.id}`,className:m,onClick:s,children:[k.imageUri&&(0,N.jsx)(c.Z,{children:(0,N.jsx)("div",{role:"img",className:j,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${k.imageUri})`}})}),(0,N.jsx)("time",{className:h,dateTime:n.startDate.localDate,children:(0,N.jsx)(a.D,{as:"h5",variant:"mestoBold",children:(0,l.jx)(y)})}),(0,N.jsxs)("div",{className:u,dir:"auto",children:[(0,N.jsxs)(a.D,{as:"h2",className:x,variant:"mesto",children:[(0,r.FO)(y)," • ",(0,l.hK)(y)]}),(0,N.jsx)(a.D,{as:"h2",variant:"cello",weight:"bold",className:v,children:(0,d.ij)(n)}),(0,N.jsx)("div",{className:g,children:(0,N.jsx)(a.D,{as:"h2",className:p,variant:"mesto","data-testid":"location-name",children:t?f:[f,b].join(i.ag.getSeparator())})})]})]})}))},65506:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ke});var s=t(59496),a=t(90641),i=t(92053),o=t(68789),c=t(53083),r=t(72444),l=t(80326),d=t(63061),m=t(86417),h=t(18805),u=t(53965),v=t(99567),g=(t(57651),t(92753)),p=t(15310),x=t(13034),j=t(47150),N=t(61051),f=t(65507),b=t(21494),k=t(86483),y=t(43603),C=t(3777),w=t(31386),D=t(50838);const S="cELOd04or4B6BbTbNWA7",I="CHJYbX33oDik9u4n4ohH",_="woQ0wEe6FL4lsGW05bsb",O="KTDREr8pDWjrmnzXzZ2z",G="UUTvdEOH2v_rejoXdl9Z",U="cBbTozR921ppaoNZP0Uh",F="SNyyQ0t_VvlWzzB9li7v",L="lwO4iko6mhCUgZN1s9AW",M="akvZI06vqHOow1pOL29J",H="WWZp3WM0maWJzl2qWEHE",E="YdkAHxbDekz9SiAxHG6M",T="AK37djOBJ2BuJOGuG1kQ",Z="JfYURQbEA_ntMsMZV6tK",A="du0mOGaZfHg3hsHwRMIu",B="Rvzy4ltiiHIp9mvlxf0c";var W=t(4637);const R=(0,s.memo)((e=>{const{concert:n,position:t,modalSpec:a}=e,{id:i,venue:o,location:r}=n,d=n.startDate.localDate,m=(0,w.CH)(d),h="ONLINE"===n.category,u=(0,s.useMemo)((()=>a?.eventRowFactory({position:t,uri:`spotify:concert:${n.id}`})),[a,t,n]),v=(0,x.$P)();return(0,W.jsxs)(C.Link,{to:`/concert/${n.id}`,className:L,onClick:()=>{u&&v.logInteraction(u.hitUiNavigate({destination:`/concert/${i}`}))},children:[(0,W.jsxs)("div",{className:M,"aria-hidden":!0,children:[(0,W.jsx)(c.D,{as:"h5",variant:"mestoBold",className:H,children:(0,w.jw)(m)}),(0,W.jsx)(c.D,{as:"h1",variant:"cello",className:E,children:(0,w.wf)(m)})]}),(0,W.jsxs)("div",{className:T,children:[(0,W.jsx)(c.D,{as:"div",variant:"violaBold",className:Z,"data-testid":"event-title",children:(0,D.Yl)(n)}),(0,W.jsx)(N.T,{children:(0,w.jx)(m)}),(0,W.jsxs)(c.D,{as:"div",variant:"viola",className:A,children:[(0,w.FO)(m)," • ",(0,w.hK)(m)]}),(0,W.jsx)(c.D,{as:"div",variant:"viola",className:B,"data-testid":"event-venue",children:h?o:[o,r].join(l.ag.getSeparator())})]})]},n.id)})),P=(0,s.memo)((e=>{const{event:n,locationName:t,onClose:a,feedSpec:i}=e,o=n?.concerts[0]?.concert,r=o?.artists[0],d=(0,s.useMemo)((()=>i?.groupedEventModalFactory({uri:r?.uri||""})),[i,r]),m=(0,x.$P)(),h=(0,x.Wi)(d);if(!n||!o||!r)return null;const u=()=>{d&&m.logInteraction(d.closeButtonFactory().hitUiHide()),a()};return(0,W.jsx)(y.Z,{contentLabel:l.ag.get("live_events.label"),isOpen:!0,className:S,onRequestClose:u,children:(0,W.jsxs)("section",{className:I,ref:h,children:[(0,W.jsx)("div",{className:_,children:(0,W.jsx)(X,{"aria-label":l.ag.get("close"),iconOnly:f.k,buttonSize:"sm",onClick:u})}),(0,W.jsxs)("div",{className:O,children:[(0,W.jsx)(b.E,{height:"48",width:"48",className:G,src:r.imageUri}),(0,W.jsxs)("div",{className:U,children:[(0,W.jsx)(c.D,{as:"h3",variant:"cello",className:F,"data-testid":"event-venue",children:r.name}),(0,W.jsx)(c.D,{as:"h3",variant:"mesto","data-testid":"event-venue",children:`${l.ag.get("concerts.count_near_location",n.concerts.length,t)}`})]})]}),n.concerts.map(((e,n)=>(0,W.jsx)(R,{concert:e.concert,position:n,modalSpec:d},e.concert.id)))]})})}));var X=(0,j.ZP)(k.o).withConfig({displayName:"ConcertFeedGroupedModal___StyledButtonTertiary",componentId:"sc-1o845wh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"}),z=t(4263),$=t(27293),Q=t(44223),K=t(23351),V=t(58908),J=t(86716),Y=t(30985);const q="pU4WoqT8T6PmtjPbFtK0",ee="FC5Y_KFJ9rJyTpydqtOW",ne="AAYLcavkBdCuebn9AQxT",te="lYHCmxpdReachiOORWGo",se="JtKEdtTtcK7s6EpGecaC",ae="myHDa69cI5CHC8fhIhkG",ie=(0,s.memo)((e=>{const{event:n,onClick:t}=e,a=(0,s.useCallback)((()=>t(n)),[n,t]),i=(0,w.CH)(n.openingDate),o=(0,w.CH)(n.closingDate),r=n.concerts[0].concert,d=r.artists[0];return(0,W.jsxs)(k.o,{onClick:a,className:q,component:"div",role:"button",children:[d.imageUri&&(0,W.jsx)(Y.Z,{children:(0,W.jsx)("div",{role:"img",className:ae,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${d.imageUri})`}})}),(0,W.jsx)("time",{className:ee,dateTime:i.toISOString(),children:(0,W.jsx)(c.D,{as:"h5",variant:"mestoBold",children:(0,w.Bc)(i,o)})}),(0,W.jsxs)("div",{className:ne,dir:"auto",children:[(0,W.jsx)(c.D,{as:"h2",variant:"cello",weight:"bold",className:te,children:(0,D.ij)(r)}),(0,W.jsx)("div",{className:se,children:(0,W.jsx)(c.D,{as:"h2",variant:"mesto","data-testid":"concerts-count",children:l.ag.get("concerts.count",n.concerts.length)})})]})]})})),oe=(0,s.memo)((e=>{const{event:n,position:t,sectionSpec:a,onOpenGroupedEvent:i}=e,o=n.concerts[0]?.concert,c=o?.id,r=o&&(0,V.g3)(o.id).toURI(),l=(0,s.useMemo)((()=>a?.eventCardFactory({identifier:c??"",position:t,uri:r??""})),[a,c,r,t]),d=(0,x.$P)(),m=e=>{i(e),l&&d.logInteraction(l.hitUiReveal())};if(n.concerts.length>1)return(0,W.jsx)(ie,{event:n,onClick:m});return(0,W.jsx)(J.Z,{concert:o,isVirtual:"online"===n.source,onClick:()=>{l&&d.logInteraction(l.hitUiNavigate({destination:r}))}})})),ce="MVPegsivznZB6gdkcnkH",re="MlK79hskRbFrN2OBjMkl",le="VxaXFH9Uq1NU0LtsVhIu",de="UDVDNa40iTSPS9uHCG7Q",me=(0,s.memo)((e=>{const{title:n,identifier:t,position:a,events:i,feedSpec:o,onOpenGroupedEvent:c}=e,r=(0,s.useMemo)((()=>o?.eventSectionFactory({identifier:t,position:a})),[o,t,a]),l=(0,x.Wi)(r);return 0===i.length?null:(0,W.jsx)("div",{className:ce,ref:l,children:(0,W.jsx)(K.ZP,{value:"headered-grid",index:a,children:(0,W.jsx)(Q.P,{total:i.length,title:n,showAll:!0,children:i.map(((e,n)=>{const t=e.concerts[0]?.concert;return(0,W.jsx)(oe,{event:e,position:n,sectionSpec:r,onOpenGroupedEvent:c},t.id)}))})})})})),he=(0,s.memo)((e=>{const{isLoading:n,events:t,locationName:s,spec:a,onOpenGroupedEvent:i}=e;if(n)return(0,W.jsx)($.h,{hasError:!1,errorMessage:""});if(0===t.length)return(0,W.jsx)(z.u,{title:l.ag.get("concerts.error.no_concerts_found_title"),message:l.ag.get("concerts.error.no_concerts_found_message",s),renderInline:!0});const o=(e=>{const n={popular:[],recommended:[],online:[]};return e.forEach((e=>{switch(e.source){case"recommendation":n.recommended.push(e);break;case"popular":n.popular.push(e);break;case"online":n.online.push(e)}})),n})(t);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(me,{title:l.ag.get("concerts_upcoming_virtual_events"),identifier:"online",position:0,events:o.online,onOpenGroupedEvent:i,feedSpec:a}),(0,W.jsx)(me,{title:l.ag.get("concerts_recommended_for_you"),identifier:"recommended",position:1,events:o.recommended,onOpenGroupedEvent:i,feedSpec:a}),(0,W.jsx)(me,{title:l.ag.get("concerts_popular_near_you"),identifier:"popular",position:2,events:o.popular,onOpenGroupedEvent:i,feedSpec:a})]})}));var ue=t(75387),ve=t(39359),ge=t(32366);const pe=e=>{const[n,{isAnonymous:t,geonameId:s}]=e.queryKey;return(async(e,n)=>{const t=e?(0,ge.getConcertsHub)(ve.b.getInstance(),void 0,n):(0,ge.getConcertsForUser)(ve.b.getInstance(),n);return(await t).body})(t,s)},xe=/^(\d+)/;var je=t(75785);const Ne=o.vI0,fe={url:"https://tickets.spotifycdn.com/partner-assets/Hub%20header%20image/Desktop%20header%20IMG.png",width:2736,height:720},be=(e,n)=>{if(!e)return"/concerts";const t=n?.normalize().replaceAll(/\W+/g,"-");return t?`/concerts/location/${e}-${t}`:`/concerts/location/${e}`},ke=(0,s.memo)((()=>{const e=(0,i.s0)(),{isAnonymous:n}=(0,a.v9)(p.Gg),t=(()=>{const{location:e}=(0,i.UO)(),[,n]=e?.match(xe)||[];if(n)try{return parseInt(n,10)}catch(e){return}})(),{data:o,isLoading:j}=(e=>{const n=(0,ue.useQueryClient)();return(0,ue.useQuery)(["concerts",e],pe,{staleTime:6e5,keepPreviousData:!0,onSuccess(t){if(e.geonameId||!t.userLocationGeonameId)return;const s=parseInt(t.userLocationGeonameId,10),a=["concerts",{...e,geonameId:s}];n.setQueryData(a,(()=>t))}})})({isAnonymous:n,geonameId:t}),{spec:N}=(0,x.fU)(r.createDesktopLiveeventsFeedEventFactory,{}),f=(0,s.useMemo)((()=>N.headerFactory()),[N]),b=(0,g.o)(),[k,y]=(0,s.useState)();const C=o?.userLocation||l.ag.get("concerts.default_location");return(0,W.jsxs)("section",{className:re,children:[(0,W.jsx)(m.$,{children:`${l.ag.get("concerts_shows_in")} ${C}`}),(0,W.jsxs)(h.gF,{size:h.fR.SMALL,backgroundColor:Ne,backgroundImages:[fe],children:[(0,W.jsx)(h.sP,{children:(0,W.jsx)(h.xd,{children:l.ag.get("live_events.label")})}),(0,W.jsx)(u.W,{children:(0,W.jsx)(v.i,{text:l.ag.get("live_events.label")})})]}),(0,W.jsxs)("div",{className:le,children:[(0,W.jsx)(d.I,{backgroundColor:Ne}),(0,W.jsxs)("div",{className:de,children:[(0,W.jsx)("div",{className:ce,"data-testid":"location-selector",children:(0,W.jsx)(je.Z,{handleLocationChange:n=>{b({type:"click",intent:"change-live-events-location"}),n?.geonameId&&e(be(n.geonameId,n.location))},locationStr:C,headerSpec:f})}),(0,W.jsx)(he,{isLoading:j,events:o?.events||[],locationName:C,spec:N,onOpenGroupedEvent:e=>{y(e);const n=e.concerts[0]?.concert.artistUris[0];b({type:"click",intent:"open-grouped-live-event",targetUri:n})}}),(0,W.jsx)(c.D,{variant:"finale",semanticColor:"textSubdued",children:l.ag.get("live_events.disclaimer")}),(0,W.jsx)(P,{event:k,locationName:C,feedSpec:N,onClose:()=>y(void 0)})]})]})]})}))},49990:(e,n,t)=>{t.d(n,{e:()=>u});var s=t(10680);const a="(min-width: 0px)",i="(min-width: 0px) and (max-width: 767px)",o="(min-width: 768px)",c="(min-width: 768px) and (max-width: 1023px)",r="(min-width: 1024px)",l="(min-width: 1024px) and (max-width: 1279px)",d="(min-width: 1280px)",m="(min-width: 1280px) and (max-width: 1919px)",h="(min-width: 1920px)",u=()=>({isXS:(0,s.a)(a),isXSOnly:(0,s.a)(i),isSM:(0,s.a)(o),isSMOnly:(0,s.a)(c),isMD:(0,s.a)(r),isMDOnly:(0,s.a)(l),isLG:(0,s.a)(d),isLGOnly:(0,s.a)(m),isXL:(0,s.a)(h)})}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map